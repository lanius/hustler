var hustler=function(){function b(){this._content={}}function c(){this._content={}}function d(){this._content={}}function f(a,b){e.begin(a),b(),e.end()}function g(a,b,c){var d=e.currentEnv(),f=d.actions,g=d.patterns,h=d.groups,i;if(p.isFunction(b))i=b;else if(p.isObject(b))i=function(a){return a},c=b;else throw new Error("invalid argument: "+b);f.register(a,i),g.register(a,c),j(a)&&k(a).forEach(function(a){h.register(a,i)})}function h(b,c){var d=e.currentEnv();return function(e){e!==undefined&&l(e);var f=a.parser.parse(b);return m(f,c,d)}}function i(a,b){return h(a,b)()}function j(a){return a.split(".").length>1}function k(a){var b=[],c=a.split(".");for(var d=1,e=c.length;d<e;d++)b.push(c.slice(0,d).join("."));return b}function l(a){"preventDefault"in a&&a.preventDefault()}function m(a,b,c){var d=c.patterns,e=b;while(a){if(a.length){var f,g=!1;for(var h=0,i=a.length;h<i;h++){var j=a[h],k=d.lookup(j.name);if(k===undefined){if(f!==undefined)throw new Error("more than 2 default patterns exist.");f=j;continue}if(n(e,k)){g=!0,a=j;break}}g||(a=f)}e=o(a.name,e,c),a=a.next}return e}function n(a,b){if(!p.isObject(a))return!1;for(var c in b)if(b.hasOwnProperty(c)&&a[c]!==b[c])return!1;return!0}function o(a,b,c){var d=c.actions,e=c.groups;if(a.substr(a.length-2)===".*"){var f=a.substr(0,a.length-2),g=e.lookup(f),h=b;for(var i=0,j=g.length;i<j;i++)h=g[i](h);return h}return d.lookup(a)(b)}"use strict";var a={};(function(a){a.register=function(a,b){if(this._content[a]!==undefined)throw new Error("action is already registered: "+a);this._content[a]=b},a.lookup=function(a){var b=this._content[a];if(b===undefined)throw new Error("action is not found: "+a);return this._content[a]},a.clear=function(){this._content={}}})(b.prototype),function(a){a.register=function(a,b){if(this._content[a]!==undefined)throw new Error("pattern is already registered: "+a);this._content[a]=b},a.lookup=function(a){return this._content[a]},a.clear=function(){this._content={}}}(c.prototype),function(a){a.register=function(a,b){this._content[a]===undefined&&(this._content[a]=[]),this._content[a].push(b)},a.lookup=function(a){return this._content[a]},a.clear=function(){this._content={}}}(d.prototype);var e={_envs:{},_stack:[],begin:function(a){this._stack.push(a)},end:function(){this._stack.pop()},current:function(){var a=this._stack;return a[a.length-1]},env:function(a){var e=this._envs[a];return e===undefined&&(this._envs[a]=e={actions:new b,patterns:new c,groups:new d}),e},currentEnv:function(){return this.env(this.current())},clear:function(){this._envs={},this._stack=[]}},p={toString:function(a){return Object.prototype.toString.call(a)},isObject:function(a){return this.toString(a)==="[object Object]"},isFunction:function(a){return this.toString(a)==="[object Function]"}},q={module:a,namespaces:e,util:p};return{namespace:f,on:g,emit:h,emitImmediately:i,_:q}}();hustler._.module.parser=function(){function a(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var b={parse:function(b,c){function i(a,b,c){var d=a,e=c-a.length;for(var f=0;f<e;f++)d=b+d;return d}function j(a){var b=a.charCodeAt(0),c,d;return b<=255?(c="x",d=2):(c="u",d=4),"\\"+c+i(b.toString(16).toUpperCase(),"0",d)}function k(a){if(e<g)return;e>g&&(g=e,h=[]),h.push(a)}function l(){var a;return a=p(),a===null&&(a=m(),a===null&&(a=q())),a}function m(){var a,c,d,g,h,i,j,l,m;return l=e,m=e,a=u(),a!==null?(b.charCodeAt(e)===123?(c="{",e++):(c=null,f===0&&k('"{"')),c!==null?(d=u(),d!==null?(g=n(),g!==null?(h=u(),h!==null?(b.charCodeAt(e)===125?(i="}",e++):(i=null,f===0&&k('"}"')),i!==null?(j=u(),j!==null?a=[a,c,d,g,h,i,j]:(a=null,e=m)):(a=null,e=m)):(a=null,e=m)):(a=null,e=m)):(a=null,e=m)):(a=null,e=m)):(a=null,e=m),a!==null&&(a=function(a,b){return b}(l,a[3])),a===null&&(e=l),a}function n(){var a,b,c,d,f;d=e,f=e,a=l();if(a!==null){c=o();if(c!==null){b=[];while(c!==null)b.push(c),c=o()}else b=null;b!==null?a=[a,b]:(a=null,e=f)}else a=null,e=f;return a!==null&&(a=function(a,b,c){return[b].concat(c)}(d,a[0],a[1])),a===null&&(e=d),a===null&&(a=l()),a}function o(){var a,c,d,g;return d=e,g=e,b.charCodeAt(e)===124?(a="|",e++):(a=null,f===0&&k('"|"')),a!==null?(c=l(),c!==null?a=[a,c]:(a=null,e=g)):(a=null,e=g),a!==null&&(a=function(a,b){return b}(d,a[1])),a===null&&(e=d),a}function p(){var a,c,d,g,h;return g=e,h=e,a=q(),a!==null?(b.substr(e,2)==="->"?(c="->",e+=2):(c=null,f===0&&k('"->"')),c!==null?(d=l(),d!==null?a=[a,c,d]:(a=null,e=h)):(a=null,e=h)):(a=null,e=h),a!==null&&(a=function(a,b,c){return b.next=c,b}(g,a[0],a[2])),a===null&&(e=g),a===null&&(g=e,a=q(),a!==null&&(a=function(a,b){return b}(g,a)),a===null&&(e=g)),a}function q(){var a,b;return b=e,a=r(),a!==null&&(a=function(a,b){return{name:b}}(b,a)),a===null&&(e=b),a}function r(){var a,b,c,d,f;return d=e,f=e,a=u(),a!==null?(b=s(),b!==null?(c=u(),c!==null?a=[a,b,c]:(a=null,e=f)):(a=null,e=f)):(a=null,e=f),a!==null&&(a=function(a,b){return b.trim()}(d,a[1])),a===null&&(e=d),a}function s(){var a,b,c;c=e,b=t();if(b!==null){a=[];while(b!==null)a.push(b),b=t()}else a=null;return a!==null&&(a=function(a,b){return b.join("")}(c,a)),a===null&&(e=c),a}function t(){var a;return/^[^\->{}|]/.test(b.charAt(e))?(a=b.charAt(e),e++):(a=null,f===0&&k("[^\\->{}|]")),a}function u(){var a,b;f++,a=[],b=v();while(b!==null)a.push(b),b=v();return f--,f===0&&a===null&&k("whitespace"),a}function v(){var a;return/^[\t\n\r ]/.test(b.charAt(e))?(a=b.charAt(e),e++):(a=null,f===0&&k("[\\t\\n\\r ]")),a}function w(a){a.sort();var b=null,c=[];for(var d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}function x(){var a=1,c=1,d=!1;for(var f=0;f<Math.max(e,g);f++){var h=b.charAt(f);h==="\n"?(d||a++,c=1,d=!1):h==="\r"||h==="\u2028"||h==="\u2029"?(a++,c=1,d=!0):(c++,d=!1)}return{line:a,column:c}}var d={actions:l,selection:m,branch:n,others:o,sequence:p,action:q,name:r,chars:s,"char":t,_:u,whitespace:v};if(c!==undefined){if(d[c]===undefined)throw new Error("Invalid rule name: "+a(c)+".")}else c="actions";var e=0,f=0,g=0,h=[],y=d[c]();if(y===null||e!==b.length){var z=Math.max(e,g),A=z<b.length?b.charAt(z):null,B=x();throw new this.SyntaxError(w(h),A,z,B.line,B.column)}return y},toSource:function(){return this._source}};return b.SyntaxError=function(b,c,d,e,f){function g(b,c){var d,e;switch(b.length){case 0:d="end of input";break;case 1:d=b[0];break;default:d=b.slice(0,b.length-1).join(", ")+" or "+b[b.length-1]}return e=c?a(c):"end of input","Expected "+d+" but "+e+" found."}this.name="SyntaxError",this.expected=b,this.found=c,this.message=g(b,c),this.offset=d,this.line=e,this.column=f},b.SyntaxError.prototype=Error.prototype,b}();